{% extends "pages/base.html" %}
{% load i18n %}
{% load static %}

{% block content %}
<div class="container py-5">
    <!-- Success Animation Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="success-animation-container text-center">
                <div class="success-checkmark">
                    <div class="check-icon">
                        <span class="icon-line line-tip"></span>
                        <span class="icon-line line-long"></span>
                        <div class="icon-circle"></div>
                        <div class="icon-fix"></div>
                    </div>
                </div>
                <h1 class="display-4 fw-bold text-success mt-4 mb-3">
                    {% trans "Order Placed Successfully!" %}
                </h1>
                <p class="lead text-muted mb-4">
                    {% trans "Thank you for your purchase! Your order has been confirmed." %}
                </p>
            </div>
        </div>
    </div>

    <!-- Order Details Card -->
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-0 shadow-lg mb-4">
                <div class="card-header bg-gradient text-white py-4" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h4 class="mb-1">
                                <i class="fas fa-receipt me-2"></i>
                                {% trans "Order Details" %}
                            </h4>
                            <small class="opacity-75">{% trans "Keep this information for your records" %}</small>
                        </div>
                        <div class="text-end">
                            <div class="badge bg-white text-success fs-6 px-3 py-2">
                                <i class="fas fa-check-circle me-1"></i>{{ order.status }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body p-4">
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="info-box">
                                <div class="info-icon">
                                    <i class="fas fa-hashtag"></i>
                                </div>
                                <div class="info-content">
                                    <small class="text-muted">{% trans "Order Number" %}</small>
                                    <h5 class="mb-0 fw-bold">#{{ order.order_id }}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="info-box">
                                <div class="info-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="info-content">
                                    <small class="text-muted">{% trans "Order Date" %}</small>
                                    <h5 class="mb-0 fw-bold">{{ order.created_at|date:"M d, Y" }}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="info-box">
                                <div class="info-icon">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="info-content">
                                    <small class="text-muted">{% trans "Customer" %}</small>
                                    <h5 class="mb-0 fw-bold">{{ order.user.username }}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="info-box">
                                <div class="info-icon">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                                <div class="info-content">
                                    <small class="text-muted">{% trans "Total Amount" %}</small>
                                    <h5 class="mb-0 fw-bold text-success">${{ order.total|floatformat:2 }}</h5>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <!-- What's Next Section -->
                    <div class="whats-next-section">
                        <h5 class="fw-bold mb-3">
                            <i class="fas fa-question-circle text-primary me-2"></i>
                            {% trans "What happens next?" %}
                        </h5>
                        <div class="timeline">
                            <div class="timeline-item">
                                <div class="timeline-icon bg-success">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="timeline-content">
                                    <h6 class="mb-1">{% trans "Order Confirmed" %}</h6>
                                    <small class="text-muted">{% trans "Your order has been received and is being processed" %}</small>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon bg-info">
                                    <i class="fas fa-box"></i>
                                </div>
                                <div class="timeline-content">
                                    <h6 class="mb-1">{% trans "Preparing for Shipment" %}</h6>
                                    <small class="text-muted">{% trans "We'll pack your items with care" %}</small>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon bg-warning">
                                    <i class="fas fa-truck"></i>
                                </div>
                                <div class="timeline-content">
                                    <h6 class="mb-1">{% trans "On the Way" %}</h6>
                                    <small class="text-muted">{% trans "Your order will be shipped soon" %}</small>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon bg-primary">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="timeline-content">
                                    <h6 class="mb-1">{% trans "Delivered" %}</h6>
                                    <small class="text-muted">{% trans "Enjoy your purchase!" %}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="row g-3 mb-4">
                <div class="col-md-6">
                    <a href="{% url 'order_status' %}" class="btn btn-outline-primary btn-lg w-100">
                        <i class="fas fa-search me-2"></i>
                        {% trans "Track Your Order" %}
                    </a>
                </div>
                <div class="col-md-6">
                    <a href="{% url 'shop' %}" class="btn btn-success btn-lg w-100">
                        <i class="fas fa-shopping-bag me-2"></i>
                        {% trans "Continue Shopping" %}
                    </a>
                </div>
            </div>

            <!-- Info Cards -->
            <div class="row g-3">
                <div class="col-md-4">
                    <div class="feature-card">
                        <i class="fas fa-envelope fa-2x text-primary mb-3"></i>
                        <h6 class="fw-bold mb-2">{% trans "Email Confirmation" %}</h6>
                        <small class="text-muted">{% trans "Check your inbox for order details" %}</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <i class="fas fa-headset fa-2x text-success mb-3"></i>
                        <h6 class="fw-bold mb-2">{% trans "Need Help?" %}</h6>
                        <small class="text-muted">{% trans "Contact our support team anytime" %}</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <i class="fas fa-undo fa-2x text-info mb-3"></i>
                        <h6 class="fw-bold mb-2">{% trans "Easy Returns" %}</h6>
                        <small class="text-muted">{% trans "30-day return policy available" %}</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Success Checkmark Animation */
.success-checkmark {
    width: 120px;
    height: 120px;
    margin: 0 auto;
    position: relative;
}

.check-icon {
    width: 120px;
    height: 120px;
    position: relative;
    border-radius: 50%;
    box-sizing: content-box;
    border: 4px solid #10b981;
    background: #ffffff;
}

.icon-line {
    height: 5px;
    background-color: #10b981;
    display: block;
    border-radius: 2px;
    position: absolute;
    z-index: 10;
}

.icon-line.line-tip {
    top: 56px;
    left: 25px;
    width: 25px;
    transform: rotate(45deg);
    animation: icon-line-tip 0.75s;
}

.icon-line.line-long {
    top: 50px;
    right: 16px;
    width: 47px;
    transform: rotate(-45deg);
    animation: icon-line-long 0.75s;
}

.icon-circle {
    top: -4px;
    left: -4px;
    z-index: 10;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    position: absolute;
    box-sizing: content-box;
    border: 4px solid rgba(16, 185, 129, 0.2);
}

.icon-fix {
    top: 12px;
    width: 10px;
    left: 32px;
    z-index: 1;
    height: 95px;
    position: absolute;
    transform: rotate(-45deg);
    background-color: #ffffff;
}

@keyframes icon-line-tip {
    0% {
        width: 0;
        left: 1px;
        top: 26px;
    }
    54% {
        width: 0;
        left: 1px;
        top: 26px;
    }
    70% {
        width: 50px;
        left: -8px;
        top: 56px;
    }
    84% {
        width: 17px;
        left: 21px;
        top: 64px;
    }
    100% {
        width: 25px;
        left: 25px;
        top: 56px;
    }
}

@keyframes icon-line-long {
    0% {
        width: 0;
        right: 46px;
        top: 60px;
    }
    65% {
        width: 0;
        right: 46px;
        top: 60px;
    }
    84% {
        width: 55px;
        right: 0px;
        top: 45px;
    }
    100% {
        width: 47px;
        right: 16px;
        top: 50px;
    }
}

/* Info Box */
.info-box {
    display: flex;
    align-items: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 12px;
    transition: all 0.3s ease;
}

.info-box:hover {
    background: #e9ecef;
    transform: translateY(-2px);
}

.info-icon {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    margin-right: 15px;
    flex-shrink: 0;
}

.info-content {
    flex: 1;
}

/* Timeline */
.timeline {
    position: relative;
    padding-left: 40px;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 15px;
    top: 15px;
    bottom: 15px;
    width: 2px;
    background: linear-gradient(180deg, #10b981 0%, #3b82f6 100%);
}

.timeline-item {
    position: relative;
    margin-bottom: 30px;
    display: flex;
    align-items: flex-start;
}

.timeline-item:last-child {
    margin-bottom: 0;
}

.timeline-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.875rem;
    position: absolute;
    left: -40px;
    z-index: 1;
}

.timeline-content {
    flex: 1;
}

/* Feature Card */
.feature-card {
    text-align: center;
    padding: 30px 20px;
    background: white;
    border: 2px solid #f0f0f0;
    border-radius: 12px;
    transition: all 0.3s ease;
}

.feature-card:hover {
    border-color: #11998e;
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(17, 153, 142, 0.15);
}

/* Button Enhancements */
.btn-lg {
    padding: 15px 30px;
    font-weight: 600;
}

/* Card Shadow */
.shadow-lg {
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1) !important;
}

/* Responsive */
@media (max-width: 768px) {
    .success-checkmark {
        width: 80px;
        height: 80px;
    }
    
    .check-icon {
        width: 80px;
        height: 80px;
    }
    
    .icon-line.line-tip {
        top: 37px;
        left: 17px;
        width: 17px;
    }
    
    .icon-line.line-long {
        top: 33px;
        right: 11px;
        width: 31px;
    }
    
    .icon-circle {
        width: 80px;
        height: 80px;
    }
    
    .icon-fix {
        top: 8px;
        left: 21px;
        height: 63px;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add fade-in animation
    const elements = document.querySelectorAll('.info-box, .timeline-item, .feature-card');
    elements.forEach((el, index) => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        setTimeout(() => {
            el.style.transition = 'all 0.5s ease';
            el.style.opacity = '1';
            el.style.transform = 'translateY(0)';
        }, 300 + (index * 100));
    });
});
</script>
{% endblock %}
